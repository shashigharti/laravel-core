<?php

namespace Robust\RealEstate\Providers;

use Illuminate\Support\ServiceProvider;
use Robust\RealEstate\Events\SendEmailToFriend;
use Robust\RealEstate\Helpers\CoreSettingHelper;
use Robust\RealEstate\Listeners\SendEmailToFriendListener;

/**
 * Class RealEstateServiceProvider
 * @package Robust\RealEstate\Providers
 */
class RealEstateServiceProvider extends ServiceProvider
{
    protected $commands = [
        'Robust\RealEstate\Console\Commands\AdvanceSearch',
        'Robust\RealEstate\Console\Commands\ListingDetail',
        'Robust\RealEstate\Console\Commands\ListingPriceCount',
        'Robust\RealEstate\Console\Commands\ListingFeature',
        'Robust\RealEstate\Console\Commands\DataPull',
        'Robust\RealEstate\Console\Commands\FieldsPull',
        'Robust\RealEstate\Console\Commands\PropertiesPull',
        'Robust\RealEstate\Console\Commands\ImagesPull',
    ];



    public function register()
    {
        parent::register(); // TODO: Change the autogenerated stub

        $this->app->bind(CoreSettingHelper::class, function ($app) {
            return new CoreSettingHelper($app->make('Robust\RealEstate\Repositories\Website\CoreSettingRepository'));
        });
        $this->loadViewsFrom(__DIR__ . '/../../resources/views', 'real-estate');
        $this->register_includes();
    }

    public function register_includes()
    {
        $this->mergeConfigFrom(__DIR__ . '/../../config/permissions.php', 'real-estate.permissions');
        $this->mergeConfigFrom(__DIR__ . '/../../config/advance-search.php', 'real-estate.search');
        $this->mergeConfigFrom(__DIR__ . '/../../config/listing-detail.php', 'real-estate.detail');
        $this->mergeConfigFrom(__DIR__ . '/../../config/data-map.php', 'real-estate.data-map');
        $this->commands($this->commands);
    }
}
